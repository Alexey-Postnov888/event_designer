// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: map.sql

package db

import (
	"context"

	"github.com/google/uuid"
)

const createOrUpdateEventMap = `-- name: CreateOrUpdateEventMap :exec
INSERT INTO event_maps (event_id, map_url, map_storage_path) 
VALUES ($1, $2, $3)
ON CONFLICT (event_id) DO UPDATE SET
    map_url = EXCLUDED.map_url,
    map_storage_path = EXCLUDED.map_storage_path,
    updated_at = now()
`

type CreateOrUpdateEventMapParams struct {
	EventID        uuid.UUID `json:"event_id"`
	MapUrl         string    `json:"map_url"`
	MapStoragePath string    `json:"map_storage_path"`
}

func (q *Queries) CreateOrUpdateEventMap(ctx context.Context, arg CreateOrUpdateEventMapParams) error {
	_, err := q.db.ExecContext(ctx, createOrUpdateEventMap, arg.EventID, arg.MapUrl, arg.MapStoragePath)
	return err
}

const deleteEventMap = `-- name: DeleteEventMap :one
DELETE FROM event_maps WHERE event_id = $1 RETURNING map_storage_path
`

func (q *Queries) DeleteEventMap(ctx context.Context, eventID uuid.UUID) (string, error) {
	row := q.db.QueryRowContext(ctx, deleteEventMap, eventID)
	var map_storage_path string
	err := row.Scan(&map_storage_path)
	return map_storage_path, err
}

const getEventMapDetails = `-- name: GetEventMapDetails :one
SELECT event_id, map_url, map_storage_path FROM event_maps WHERE event_id = $1
`

type GetEventMapDetailsRow struct {
	EventID        uuid.UUID `json:"event_id"`
	MapUrl         string    `json:"map_url"`
	MapStoragePath string    `json:"map_storage_path"`
}

func (q *Queries) GetEventMapDetails(ctx context.Context, eventID uuid.UUID) (GetEventMapDetailsRow, error) {
	row := q.db.QueryRowContext(ctx, getEventMapDetails, eventID)
	var i GetEventMapDetailsRow
	err := row.Scan(&i.EventID, &i.MapUrl, &i.MapStoragePath)
	return i, err
}
